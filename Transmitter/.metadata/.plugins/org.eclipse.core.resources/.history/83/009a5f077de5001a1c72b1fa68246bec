/*
 * LoRaRadio.cpp
 *
 *  Created on: 23 aoï¿½t 2020
 *      Author: jthom
 */

#include "LoRaRadio.h"

LoRaRadio::LoRaRadio(uint8_t csPin, uint8_t rstPin, uint8_t irqPin, byte localAddress, byte destination)
: _localAddress(localAddress), _destination(destination)
{
	LoRa.setPins(csPin, rstPin, irqPin);
}

void LoRaRadio::begin(long freq){
	if (!LoRa.begin(freq)) {             // initialize ratio at 915 MHz
	Serial.println("LoRa init failed. Check your connections.");
	return false
	}
	return true;
}

bool sendMessage(String message){
	LoRa.beginPacket();                   // start packet
	LoRa.write(_destination);             // add destination address
	LoRa.write(_localAddress);            // add sender address
	LoRa.write(outgoing.length());        // add payload length
	LoRa.print(outgoing);                 // add payload
	return LoRa.endPacket();              // finish packet and send it
}
